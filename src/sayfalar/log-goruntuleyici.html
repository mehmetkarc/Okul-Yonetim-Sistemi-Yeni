<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Log G√∂r√ºnt√ºleyici | Okul Y√∂netim</title>
    <link rel="stylesheet" href="anasayfa.css" />
    <link rel="stylesheet" href="log-goruntuleyici.css" />
    <link rel="stylesheet" href="../bilesenler/bildirim-sistemi.css" />
  </head>
  <body>
    <!-- Arka Plan Animasyonlarƒ± -->
    <div class="bg-animations">
      <div class="gradient-orb orb-1"></div>
      <div class="gradient-orb orb-2"></div>
      <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Header -->
    <header class="top-bar">
      <div class="top-bar-left">
        <div
          class="logo-container"
          onclick="window.location.href='anasayfa.html'"
        >
          <svg class="logo-icon" viewBox="0 0 24 24" fill="none">
            <path
              d="M12 3L4 9V21H20V9L12 3Z"
              stroke="url(#gradient1)"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M9 21V12H15V21"
              stroke="url(#gradient1)"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <defs>
              <linearGradient
                id="gradient1"
                x1="0%"
                y1="0%"
                x2="100%"
                y2="100%"
              >
                <stop
                  offset="0%"
                  style="stop-color: #00d9ff; stop-opacity: 1"
                />
                <stop
                  offset="100%"
                  style="stop-color: #7b2fff; stop-opacity: 1"
                />
              </linearGradient>
            </defs>
          </svg>
          <div class="logo-text">
            <span class="logo-title">Okul Y√∂netim</span>
            <span class="logo-subtitle">Log Merkezi</span>
          </div>
        </div>

        <div style="margin-left: 40px">
          <h2
            style="color: white; font-size: 20px; font-weight: 600; margin: 0"
          >
            üìú Sistem Loglarƒ±
          </h2>
        </div>
      </div>

      <div class="top-bar-right">
        <button
          class="icon-btn"
          onclick="window.location.href='anasayfa.html'"
          title="Ana Sayfa"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
          </svg>
        </button>
        <div class="user-menu">
          <div class="user-avatar" id="userInitials"><span>SA</span></div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="page-container">
      <!-- Hƒ±zlƒ± ƒ∞statistikler -->
      <div class="stats-row">
        <div class="stat-mini info">
          <div class="stat-mini-icon">‚ÑπÔ∏è</div>
          <div class="stat-mini-content">
            <div class="stat-mini-label">Info</div>
            <div class="stat-mini-value" id="infoCount">0</div>
          </div>
        </div>

        <div class="stat-mini success">
          <div class="stat-mini-icon">‚úÖ</div>
          <div class="stat-mini-content">
            <div class="stat-mini-label">Success</div>
            <div class="stat-mini-value" id="successCount">0</div>
          </div>
        </div>

        <div class="stat-mini warning">
          <div class="stat-mini-icon">‚ö†Ô∏è</div>
          <div class="stat-mini-content">
            <div class="stat-mini-label">Warning</div>
            <div class="stat-mini-value" id="warningCount">0</div>
          </div>
        </div>

        <div class="stat-mini error">
          <div class="stat-mini-icon">‚ùå</div>
          <div class="stat-mini-content">
            <div class="stat-mini-label">Error</div>
            <div class="stat-mini-value" id="errorCount">0</div>
          </div>
        </div>

        <div class="stat-mini total">
          <div class="stat-mini-icon">üìä</div>
          <div class="stat-mini-content">
            <div class="stat-mini-label">Toplam</div>
            <div class="stat-mini-value" id="totalCount">0</div>
          </div>
        </div>
      </div>

      <!-- Filtre ve Aksiyon B√∂l√ºm√º -->
      <div class="filter-action-section">
        <div class="filter-group">
          <!-- Arama -->
          <div class="search-box">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8" />
              <path d="m21 21-4.35-4.35" />
            </svg>
            <input
              type="text"
              id="searchInput"
              placeholder="Log mesajƒ±nda ara..."
              class="search-input"
            />
          </div>

          <!-- Seviye Filtresi -->
          <select id="levelFilter" class="filter-select">
            <option value="all">üéØ T√ºm Seviyeler</option>
            <option value="info">‚ÑπÔ∏è Info</option>
            <option value="success">‚úÖ Success</option>
            <option value="warn">‚ö†Ô∏è Warning</option>
            <option value="error">‚ùå Error</option>
          </select>

          <!-- Tarih Filtresi -->
          <select id="dateFilter" class="filter-select">
            <option value="all">üìÖ T√ºm Tarihler</option>
            <option value="today">üìÜ Bug√ºn</option>
            <option value="yesterday">üìÜ D√ºn</option>
            <option value="week">üìÖ Bu Hafta</option>
            <option value="month">üóìÔ∏è Bu Ay</option>
          </select>
        </div>

        <div class="action-group">
          <button class="btn-action refresh" onclick="loadLogs()">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"
              />
            </svg>
            Yenile
          </button>

          <button class="btn-action export" onclick="exportLogs('txt')">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"
              />
            </svg>
            Export TXT
          </button>

          <button class="btn-action export" onclick="exportLogs('json')">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"
              />
            </svg>
            Export JSON
          </button>

          <button class="btn-action folder" onclick="openLogFolder()">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"
              />
            </svg>
            Klas√∂r
          </button>

          <button class="btn-action clear" onclick="clearLogs()">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
              />
            </svg>
            Temizle
          </button>
        </div>
      </div>

      <!-- Log Tablosu -->
      <div class="table-section">
        <div class="table-container">
          <table class="log-table">
            <thead>
              <tr>
                <th style="width: 80px">Seviye</th>
                <th style="width: 180px">Tarih/Saat</th>
                <th>Mesaj</th>
                <th style="width: 100px">ƒ∞≈ülem</th>
              </tr>
            </thead>
            <tbody id="logTableBody">
              <tr>
                <td
                  colspan="4"
                  style="text-align: center; padding: 60px 20px; color: #888"
                >
                  <div class="loading-spinner"></div>
                  Loglar y√ºkleniyor...
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="table-footer">
          <div class="table-info">
            <span id="showingInfo">G√∂steriliyor: 0 log</span>
          </div>
          <div class="auto-refresh-toggle">
            <label class="toggle-label">
              <input
                type="checkbox"
                id="autoRefreshCheckbox"
                class="toggle-input"
              />
              <span class="toggle-slider"></span>
              <span class="toggle-text">
                <span class="pulse-dot"></span>
                Otomatik Yenileme (5 sn)
              </span>
            </label>
          </div>
        </div>
      </div>
    </main>

    <!-- Detay Modal -->
    <div class="modal-overlay" id="modalLogDetail" style="display: none">
      <div class="modal-container large">
        <div class="modal-header">
          <div class="modal-header-content">
            <div class="modal-icon" id="detailIcon">üìú</div>
            <div>
              <h2>Log Detayƒ±</h2>
              <p class="modal-subtitle" id="detailTimestamp">-</p>
            </div>
          </div>
          <button
            class="modal-close-btn"
            onclick="closeModal('modalLogDetail')"
          >
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M18 6L6 18M6 6l12 12" />
            </svg>
          </button>
        </div>

        <div class="modal-body">
          <div class="detail-section">
            <div class="detail-label">üìå Seviye</div>
            <div id="detailLevel">-</div>
          </div>

          <div class="detail-section">
            <div class="detail-label">üí¨ Mesaj</div>
            <div id="detailMessage" class="detail-message">-</div>
          </div>

          <div
            class="detail-section"
            id="detailMetaSection"
            style="display: none"
          >
            <div class="detail-label">üîç Ek Bilgiler</div>
            <pre id="detailMeta" class="detail-meta"></pre>
          </div>

          <div
            class="detail-section"
            id="detailStackSection"
            style="display: none"
          >
            <div class="detail-label">‚ö†Ô∏è Stack Trace</div>
            <pre id="detailStack" class="detail-stack"></pre>
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn-primary" onclick="closeModal('modalLogDetail')">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M20 6L9 17l-5-5" />
            </svg>
            Tamam
          </button>
        </div>
      </div>
    </div>

    <script src="../bilesenler/bildirim-sistemi.js"></script>
    <script src="log-goruntuleyici.js"></script>
  </body>
</html>
